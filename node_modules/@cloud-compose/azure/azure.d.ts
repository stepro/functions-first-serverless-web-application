import * as compose from "@cloud-compose/compose";

export interface ResourceProperties {
    resourceName?: string;
    resourceGroup?: string;
    location?: string;
    tags?: Map<string, string>;
}

export interface ResourceSpec<T extends Resource<T, S, P>, S extends ResourceSpec<T, S, P> & P, P extends ResourceProperties>
    extends ResourceProperties, compose.Spec<T, S, P> {
    readonly resourceType: string;
}

export interface Resource<T extends Resource<T, S, P>, S extends ResourceSpec<T, S, P> & P, P extends ResourceProperties> extends compose.Service<T, S, P> {
    readonly resourceId: string;
}

export interface ResourceSelection<T extends Resource<T, S, P>, S extends ResourceSpec<T, S, P> & P, P extends ResourceProperties> extends compose.Selection<T, S, P> {
}

export interface ResourceReference<T extends Resource<T, S, P>, S extends ResourceSpec<T, S, P> & P, P extends ResourceProperties>
    extends ResourceSelection<T, S, P>, compose.Reference<T, S, P> {
}

export interface ResourceType<T extends Resource<T, S, P>, S extends ResourceSpec<T, S, P> & P, P extends ResourceProperties> extends compose.Type<T, S, P> {
    for(selector: string): ResourceSelection<T, S, P>;
    (name: string): ResourceReference<T, S, P>;
}

export interface ResourceSpec<T extends Resource<T, S, P>, S extends ResourceSpec<T, S, P> & P, P extends ResourceProperties> {
    readonly type?: ResourceType<T, S, P>;
}
